<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Aghenim Sanctuary</title>
  <icon>https://www.gravatar.com/avatar/ea45b4a3e6e11afc565d51f03f991c03</icon>
  <subtitle>Frontend &amp; DevOps Engineer</subtitle>
  <link href="http://xsun.work/atom.xml" rel="self"/>
  
  <link href="http://xsun.work/"/>
  <updated>2024-01-08T14:07:33.560Z</updated>
  <id>http://xsun.work/</id>
  
  <author>
    <name>Aghenim</name>
    <email>me@xsun.work</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Butterfly - Hexo theme installation and configuration</title>
    <link href="http://xsun.work/posts/c9954876/"/>
    <id>http://xsun.work/posts/c9954876/</id>
    <published>2024-01-08T12:01:41.000Z</published>
    <updated>2024-01-08T14:07:33.560Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704718063078.jpg" alt="1704718064735"></p><h1 id="Theme-Selection"><a href="#Theme-Selection" class="headerlink" title="Theme Selection"></a>Theme Selection</h1><p>The official website offers over 400 themes for selection (<a href="https://hexo.io/themes/">https://hexo.io/themes/</a>).</p><p>However, since Hexo itself is just a static web page framework driven by Markdown documents, a lot of functionalities<br>are actually implemented by theme authors and plugin authors, leading to significant differences between themes.</p><p><strong>Butterfly</strong></p><p><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a> is what I consider a standout among Hexo themes:</p><ol><li>This project has been updated since 2019 and is still being updated stably, with its latest release published last<br>week (2024.1).</li><li>The project has 6.3K Stars (as of 2024.1), making it one of the highest-rated themes in the entire Hexo community.</li><li>The project has 1024 Closed Issues and only 3 Open Issues (as of 2024.1). I also raised<br>an <a href="https://github.com/jerryc127/hexo-theme-butterfly/issues/1423">Issue</a> during the installation and configuration<br>process, which was addressed by the author on the same day.</li><li>Most importantly, this theme is extremely powerful. Dark mode, social sharing of articles, Algolia search, TOC,<br>automatic related article recommendation, global traditional and simplified Chinese conversion, PWA web app, visitor<br>counting, word count, uptime, large image mode, reading mode, external link prefetch (automatic preloading on mouse<br>hover), Cloudflare Analytics, and more can all be achieved through configuration!</li></ol><p>With such an excellent, stable, and feature-rich project, what more could one ask for!</p><blockquote><p>Official Documentation: <a href="https://butterfly.js.org/posts/21cfbf15/">https://butterfly.js.org/posts/21cfbf15/</a><br>Official Github: <a href="https://github.com/jerryc127/hexo-theme-butterfly">https://github.com/jerryc127/hexo-theme-butterfly</a></p></blockquote><h1 id="Theme-Installation"><a href="#Theme-Installation" class="headerlink" title="Theme Installation"></a>Theme Installation</h1><p><strong>Installation</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install hexo-theme-butterfly</span><br></pre></td></tr></table></figure><p><strong>Upgrade</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm update hexo-theme-butterfly</span><br></pre></td></tr></table></figure><h1 id="Theme-Application"><a href="#Theme-Application" class="headerlink" title="Theme Application"></a>Theme Application</h1><p><strong>Application</strong></p><p>Configure the <code>_config.yml</code> in the project root directory:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><p><strong>Install Rendering Plugins</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><h1 id="Theme-Configuration"><a href="#Theme-Configuration" class="headerlink" title="Theme Configuration"></a>Theme Configuration</h1><blockquote><p>Official Theme Configuration Documentation Part1: <a href="https://butterfly.js.org/posts/4aa8abbe/">https://butterfly.js.org/posts/4aa8abbe/</a><br>Official Theme Configuration Documentation Part2: <a href="https://butterfly.js.org/posts/ceeb73f/">https://butterfly.js.org/posts/ceeb73f/</a></p></blockquote><p><strong>_config.butterfly.yml</strong></p><ol><li>Create a <code>_config.butterfly.yml</code> configuration file in the root directory.</li><li>Refer to the official theme documentation for basic configuration.</li></ol><p><strong>Run the Project</strong></p><p>At this point, the theme should be active.</p><p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704719743684.png" alt="1704719751543"></p><h1 id="Precautions⚠️"><a href="#Precautions⚠️" class="headerlink" title="Precautions⚠️"></a>Precautions⚠️</h1><blockquote><p>The following issues pertain to hexo 7.0.0 and butterfly 4.12.0</p></blockquote><ol><li><p><code>canvas_fluttering_ribbon.mobile: true</code> (enabling mobile background ribbon animation) causes background<br>synchronization issues when switching to dark mode on some mobile devices. It is recommended to disable this feature.</p></li><li><p>Setting <code>subtitle</code> directly with <code>startDelay</code>, <code>typeSpeed</code>, and <code>backSpeed</code> is ineffective. You need to configure<br>a <code>typed_option</code> layer in between, as shown in the example below:</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">effect:</span> <span class="literal">true</span> <span class="comment"># Typewriter Effect</span></span><br><span class="line">    <span class="attr">typed_option:</span> <span class="comment"># over here</span></span><br><span class="line">        <span class="attr">startDelay:</span> <span class="number">800</span> <span class="comment"># time before typing starts in milliseconds</span></span><br><span class="line">        <span class="attr">typeSpeed:</span> <span class="number">100</span> <span class="comment"># type speed in milliseconds</span></span><br><span class="line">        <span class="attr">backSpeed:</span> <span class="number">20</span> <span class="comment"># backspacing speed in milliseconds</span></span><br><span class="line">    <span class="attr">loop:</span> <span class="literal">true</span> <span class="comment"># loop typing</span></span><br><span class="line">    <span class="attr">source:</span> <span class="literal">false</span></span><br><span class="line">    <span class="string">...</span></span><br></pre></td></tr></table></figure></li><li><p>When configuring <code>social</code> colors, it does not switch colors according to the dark mode.</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">    <span class="attr">fab fa-youtube:</span> <span class="string">https://www.youtube.com/@aghenim</span> <span class="string">||</span> <span class="string">Youtube</span> <span class="string">||</span> <span class="string">&quot;red&quot;</span> <span class="comment"># fixed red</span></span><br><span class="line">    <span class="attr">fab fa-youtube:</span> <span class="string">https://www.youtube.com/@aghenim</span> <span class="string">||</span> <span class="string">Youtube</span> <span class="comment"># default black, white in dark mode</span></span><br></pre></td></tr></table></figure></li><li><p>To enable <strong>Addtoany</strong>, you need to manually disable <strong>sharejs</strong> first. Sharejs supports fewer platforms and, as the<br>project is no longer maintained for several years, platforms that have been renamed cannot be configured, hence it&#39;s<br>recommended to use Addtoany.</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sharejs:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span> <span class="comment"># disable sharejs before enabling addtoany</span></span><br><span class="line"><span class="attr">addtoany:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">item:</span> <span class="string">x,whatsapp,wechat,email,copy_link</span> <span class="comment"># desired contents</span></span><br></pre></td></tr></table></figure></li><li><p>When <code>pjax.enable: true</code>, files injected by <code>inject</code>, such as styles and JS, may be loaded repeatedly, causing<br>issues.</p></li><li><p>JS files injected into <code>inject.head</code> can&#39;t access DOM elements (obviously, as the DOM has not yet rendered). JS files<br>injected into <code>inject.bottom</code> take a short delay to take effect, meaning animations and similar effects are not<br>immediately visible. If you&#39;re concerned about this, you can insert a DOMContentLoaded listener in the head.</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// your function here.</span></span><br><span class="line">&#125;); </span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704718063078.jpg&quot; alt=&quot;1704718064735&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;Theme-Selection&quot;&gt;&lt;a href</summary>
      
    
    
    
    <category term="Web" scheme="http://xsun.work/categories/Web/"/>
    
    
    <category term="Hexo" scheme="http://xsun.work/tags/Hexo/"/>
    
    <category term="Butterfly" scheme="http://xsun.work/tags/Butterfly/"/>
    
    <category term="Theme" scheme="http://xsun.work/tags/Theme/"/>
    
    <category term="Web" scheme="http://xsun.work/tags/Web/"/>
    
    <category term="Blog" scheme="http://xsun.work/tags/Blog/"/>
    
  </entry>
  
  <entry>
    <title>Create a personal blog with Hexo</title>
    <link href="http://xsun.work/posts/6f34bf22/"/>
    <id>http://xsun.work/posts/6f34bf22/</id>
    <published>2024-01-08T07:25:45.000Z</published>
    <updated>2024-01-08T14:11:07.952Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704701475952.jpg" alt="1704701477603"></p><blockquote><p>Official Documentation: <a href="https://hexo.io/docs/">https://hexo.io/docs/</a></p></blockquote><h1 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h1><p>You will need:</p><ol><li>Node.js (12.0 or higher)</li><li>Git</li></ol><p>To check your environment, please enter the following commands and ensure you get similar return results:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git -v</span><br><span class="line"><span class="comment"># git version 2.xx.x</span></span><br><span class="line"></span><br><span class="line">node -v</span><br><span class="line"><span class="comment"># v18.xx.x</span></span><br><span class="line"></span><br><span class="line">npm -v</span><br><span class="line"><span class="comment"># 10.x.x</span></span><br></pre></td></tr></table></figure><h1 id="Initialize-Project"><a href="#Initialize-Project" class="headerlink" title="Initialize Project"></a>Initialize Project</h1><p>Navigate to the path where you want to store your blog source code and perform the following operations:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>After initialization, the directory structure should be as follows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── <span class="built_in">source</span></span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><h1 id="Install-Dependencies"><a href="#Install-Dependencies" class="headerlink" title="Install Dependencies"></a>Install Dependencies</h1><p>I personally prefer to use pnpm, but npm and yarn should be fine as well.</p><blockquote><p>The differences between Npm, Yarn, and Pnpm can be seen in <a href="./npm-yarn-pnpm-vs.html">TODO</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install</span><br></pre></td></tr></table></figure><h1 id="Running-the-Project"><a href="#Running-the-Project" class="headerlink" title="Running the Project"></a>Running the Project</h1><h2 id="Script-Explanation"><a href="#Script-Explanation" class="headerlink" title="Script Explanation"></a>Script Explanation</h2><p>Open <code>package.json</code>, and you will find the following scripts:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo server&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>They correspond to:</p><ul><li>build: Generate static web page resources (public).</li><li>clean: Clear the cache, mainly db.json and public.</li><li>deploy: Deploy, when used in conjunction with hexo-deployer-git, it will push static web page resources to a specified<br>git project. Commonly used for Github Pages service.</li><li>server: Local debugging and running.</li></ul><h2 id="Running-the-Project-1"><a href="#Running-the-Project-1" class="headerlink" title="Running the Project"></a>Running the Project</h2><p>Execute the <code>server</code> script (<code>pnpm run server</code> or use the interactive button in the IDE) to run the project locally.</p><p>Under normal circumstances, you will get an output like this in the console:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">pnpm run server</span><br><span class="line">$ hexo server</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><p>At this point, if you visit <code>http://localhost:4000/</code> in your browser, you should be able to see your blog homepage.</p><p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704700921055.png" alt="1704700921055"></p><h1 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h1><blockquote><p>Reference Documentation: <a href="https://hexo.io/docs/one-command-deployment">https://hexo.io/docs/one-command-deployment</a></p></blockquote><p>Use <strong>hexo-deployer-git</strong> <a href="https://github.com/hexojs/hexo-deployer-git">(Official Documentation)</a> in conjunction with *<br><em>GitHub Pages</em>* <a href="https://pages.github.com/">(Official Documentation)</a> service</p><h2 id="1-Configure-Github-Pages"><a href="#1-Configure-Github-Pages" class="headerlink" title="1. Configure Github Pages"></a>1. Configure Github Pages</h2><p>See <a href="./todo.html">TODO</a></p><h2 id="2-Configure-Local-SSH-Key-for-Github"><a href="#2-Configure-Local-SSH-Key-for-Github" class="headerlink" title="2. Configure Local SSH-Key for Github"></a>2. Configure Local SSH-Key for Github</h2><p>See <a href="./todo.html">TODO</a></p><h2 id="3-Install-hexo-deployer-git"><a href="#3-Install-hexo-deployer-git" class="headerlink" title="3. Install hexo-deployer-git"></a>3. Install hexo-deployer-git</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Run in the root directory of the project:</span></span><br><span class="line">pnpm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h2 id="4-Configure-config-yml"><a href="#4-Configure-config-yml" class="headerlink" title="4. Configure _config.yml"></a>4. Configure _config.yml</h2><p>Edit the _config.yml file in the root directory, and find the following section:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>If there is no <code>deploy: </code>, add it manually.</p></blockquote><p>Modify this configuration as follows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: git@github.com:&lt;Your-Github-Name&gt;/&lt;Your-Github-Name&gt;github.io.git <span class="comment"># Replace &lt;Your-Github-Name&gt; with your Github username</span></span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure><h2 id="5-Deploy-the-Project-to-Github-Pages"><a href="#5-Deploy-the-Project-to-Github-Pages" class="headerlink" title="5. Deploy the Project to Github Pages"></a>5. Deploy the Project to Github Pages</h2><ol><li>Run <code>hexo deploy</code> or <code>pnpm run deploy</code>.</li><li>Visit your-github-name.github.io (replace your-github-name with your Github username).</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704701475952.jpg&quot; alt=&quot;1704701477603&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Official Documen</summary>
      
    
    
    
    <category term="Web" scheme="http://xsun.work/categories/Web/"/>
    
    
    <category term="Hexo" scheme="http://xsun.work/tags/Hexo/"/>
    
    <category term="Web" scheme="http://xsun.work/tags/Web/"/>
    
    <category term="Blog" scheme="http://xsun.work/tags/Blog/"/>
    
  </entry>
  
</feed>
