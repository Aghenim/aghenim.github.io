<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Aghenim Sanctuary</title>
  <icon>https://www.gravatar.com/avatar/ea45b4a3e6e11afc565d51f03f991c03</icon>
  <subtitle>Frontend &amp; DevOps Engineer</subtitle>
  <link href="http://xsun.work/atom.xml" rel="self"/>
  
  <link href="http://xsun.work/"/>
  <updated>2024-01-15T07:02:18.285Z</updated>
  <id>http://xsun.work/</id>
  
  <author>
    <name>Aghenim</name>
    <email>me@xsun.work</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>将你的内网服务发布到公网 - 使用开源工具FRP进行网络穿透</title>
    <link href="http://xsun.work/posts/dd126a4b/"/>
    <id>http://xsun.work/posts/dd126a4b/</id>
    <published>2024-01-15T06:34:41.000Z</published>
    <updated>2024-01-15T07:02:18.285Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>官方文档：<a href="https://gofrp.org/zh-cn/docs">https://gofrp.org/zh-cn/docs</a></p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1705301049155.jpg" alt="1705301050842">  </p><h1 id="系统需求"><a href="#系统需求" class="headerlink" title="系统需求"></a>系统需求</h1><p>由于采用 Go 语言编写，因此系统需求与最新的 Go 语言对系统和平台的要求一致，具体请参考 <a href="https://golang.org/doc/install#requirements">Golang System requirements</a>。</p><h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>您可以从 GitHub 的 <a href="https://github.com/fatedier/frp/releases">Release</a> 页面中下载最新版本的客户端和服务器二进制文件。所有文件都打包在一个压缩包中，还包含了一份完整的配置参数说明。</p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><ol><li>解压下载的压缩包。</li><li>将 <code>frpc</code> 复制到内网服务所在的机器上。</li><li>将 <code>frps</code> 复制到拥有公网 IP 地址的机器上，并将它们放在任意目录。</li></ol><h1 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h1><ol><li><p>编写配置文件，目前支持的文件格式包括 TOML&#x2F;YAML&#x2F;JSON，旧的 INI 格式仍然支持，但已经不再推荐。</p></li><li><p>使用以下命令启动服务器：<code>./frps -c ./frps.toml</code>。</p></li><li><p>使用以下命令启动客户端：<code>./frpc -c ./frpc.toml</code>。</p></li><li><p>如果需要在后台长期运行，建议结合其他工具，如 <a href="https://gofrp.org/zh-cn/docs/setup/systemd/">systemd</a> 、<code>nohup</code>和 <code>supervisor</code>。</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 服务端</span></span><br><span class="line"><span class="built_in">nohup</span> ./frps -c ./frps.toml &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 客户端</span></span><br><span class="line"><span class="built_in">nohup</span> ./frpc -c ./frpc.toml &amp;</span><br></pre></td></tr></table></figure></li></ol><p>有关如何编写配置文件，详见 <a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">配置文件</a> 章节中的内容。</p><p>完整的配置项说明，详见 <a href="https://gofrp.org/zh-cn/docs/reference/">官方文档 - 参考</a> 中的内容。</p><h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><h2 id="frps-toml"><a href="#frps-toml" class="headerlink" title="frps.toml"></a>frps.toml</h2><p><strong>在具有公网 IP 的机器上部署 frps</strong></p><p>部署 frps 并编辑 frps.toml 文件。以下是简化的配置，其中设置了 frp 服务器用于接收客户端连接的端口：</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bindPort</span> = <span class="number">7000</span></span><br></pre></td></tr></table></figure><h2 id="frpc-toml"><a href="#frpc-toml" class="headerlink" title="frpc.toml"></a>frpc.toml</h2><p><strong>在需要被访问的内网机器上部署 frpc</strong></p><p>部署 frpc 并编辑 frpc.toml 文件，假设 frps 所在服务器的公网 IP 地址为 x.x.x.x。以下是示例配置：</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">serverAddr</span> = <span class="string">&quot;x.x.x.x&quot;</span></span><br><span class="line"><span class="attr">serverPort</span> = <span class="number">7000</span></span><br><span class="line"></span><br><span class="line"><span class="section">[[proxies]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;ssh&quot;</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;tcp&quot;</span></span><br><span class="line"><span class="attr">localIP</span> = <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line"><span class="attr">localPort</span> = <span class="number">22</span></span><br><span class="line"><span class="attr">remotePort</span> = <span class="number">6000</span></span><br><span class="line"></span><br><span class="line"><span class="section">[[proxies]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;nginx&quot;</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;http&quot;</span></span><br><span class="line"><span class="attr">localIP</span> = <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line"><span class="attr">localPort</span> = <span class="number">80</span></span><br><span class="line"><span class="attr">remotePort</span> = <span class="number">8080</span></span><br></pre></td></tr></table></figure><ul><li><code>localIP</code> 和 <code>localPort</code> 配置为需要从公网访问的内网服务的地址和端口。</li><li><code>remotePort</code> 表示在 frp 服务端监听的端口，访问此端口的流量将被转发到本地服务的相应端口。</li><li><code>type</code>表示连接类型，常用的type包括<code>http</code>和<code>tcp</code>：<ul><li>常见的Web服务、Server服务都是<code>http</code>连接。</li><li>如ssh、mysql、redis等服务的连接为<code>tcp</code>连接。</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://gofrp.org/zh-cn/docs&quot;&gt;https://gofrp.org/zh-cn/docs&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsde</summary>
      
    
    
    
    <category term="DevOps" scheme="http://xsun.work/categories/DevOps/"/>
    
    
    <category term="DevOps" scheme="http://xsun.work/tags/DevOps/"/>
    
    <category term="Frp" scheme="http://xsun.work/tags/Frp/"/>
    
    <category term="Network" scheme="http://xsun.work/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>Hexo adds PWA Web App support by Butterfly Theme</title>
    <link href="http://xsun.work/posts/c9fe5e28/"/>
    <id>http://xsun.work/posts/c9fe5e28/</id>
    <published>2024-01-09T03:37:45.000Z</published>
    <updated>2024-01-09T07:24:33.702Z</updated>
    
    <content type="html"><![CDATA[<p>This solution is based on the Butterfly theme for Hexo, for details see <a href="https://xsun.work/zh/posts/4b4dbb3/">Butterfly - Hexo Theme Installation and Configuration</a></p><h1 id="What-is-PWA"><a href="#What-is-PWA" class="headerlink" title="What is PWA"></a>What is PWA</h1><p>Progressive Web Apps (PWA) are applications built using web platform technologies, but they provide a user experience akin to an app specific to a platform.</p><p>Like websites, PWAs can run on multiple platforms and devices with a single code base. Like an app specific to a platform, they can be installed on devices, run offline and in the background, and integrate with the device and other installed apps.</p><p>It is a lightweight cross-platform app based on web technology. Compared to traditional apps, it is lighter, easier to install, and more user-friendly. Compared to traditional web, it supports offline operation and has more powerful API support, allowing it to achieve more functions than traditional web.</p><blockquote><p>For more information, refer to:</p><ul><li><a href="https://en.wikipedia.org/wiki/Progressive_web_app">Wikipedia - Progressive web app</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps">Mozilla Developer Documentation</a></li><li><a href="https://developer.chrome.com/docs/lighthouse/pwa">Google Tools for Web Developers</a></li></ul></blockquote><h1 id="Install-Hexo-Plugin"><a href="#Install-Hexo-Plugin" class="headerlink" title="Install Hexo Plugin"></a>Install Hexo Plugin</h1><ol><li><p>Install the <strong>hexo-offline</strong> plugin in the project root directory</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install hexo-offline</span><br></pre></td></tr></table></figure></li><li><p>Create a <code>hexo-offline.config.cjs</code> file in the project root directory, and add the following content:</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// offline config passed to workbox-build.</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">globPatterns</span>: [<span class="string">&#x27;**/*.&#123;js,html,css,png,jpg,gif,svg,webp,eot,ttf,woff,woff2&#125;&#x27;</span>],</span><br><span class="line">  <span class="attr">globDirectory</span>: <span class="string">&#x27;public&#x27;</span>,</span><br><span class="line">  <span class="attr">swDest</span>: <span class="string">&#x27;public/service-worker.js&#x27;</span>,</span><br><span class="line">  <span class="attr">maximumFileSizeToCacheInBytes</span>: <span class="number">10485760</span>, <span class="comment">// Maximum file size to cache, in bytes.</span></span><br><span class="line">  <span class="attr">skipWaiting</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">clientsClaim</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>For more configuration options, see <a href="https://github.com/JLHwung/hexo-offline">hexo-offline official documentation</a></p></blockquote><h1 id="Create-Web-App-Manifest"><a href="#Create-Web-App-Manifest" class="headerlink" title="Create Web App Manifest"></a>Create Web App Manifest</h1><p>Create a <code>manifest.json</code> file in the <code>source/</code> directory of the project, and add the following content:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Aghenim Sanctuary&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="comment">// App Name</span></span><br><span class="line">   <span class="attr">&quot;short_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Aghenim Sanctuary&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="comment">// App Short Name</span></span><br><span class="line">   <span class="attr">&quot;start_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/index.html&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;display&quot;</span><span class="punctuation">:</span> <span class="string">&quot;standalone&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Web &amp; DevOps &amp; More&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="comment">// App Description</span></span><br><span class="line">   <span class="attr">&quot;orientation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;natural&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;prefer_related_applications&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;theme_color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#000&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="comment">// Theme Color</span></span><br><span class="line">   <span class="attr">&quot;background_color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#000&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="comment">// Background Color</span></span><br><span class="line">   <span class="attr">&quot;icons&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">         <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;logo.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;sizes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;500x500&quot;</span></span><br><span class="line">         <span class="comment">// sizes should match the actual dimensions of the Logo</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">   <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;scope&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>You can also quickly create a <code>manifest.json</code> through <a href="https://app-manifest.firebaseapp.com/">Web App Manifest</a></p><blockquote><p>Warning⚠️: Please modify the configuration as needed, and ensure the correct relative paths for <code>manifest.json</code> and various size logos.</p></blockquote><blockquote><p>Warning⚠️: JSON does not support comments, please remove comments when pasting this content into the project.</p></blockquote><h1 id="Configure-to-Enable-PWA"><a href="#Configure-to-Enable-PWA" class="headerlink" title="Configure to Enable PWA"></a>Configure to Enable PWA</h1><ol><li><p>Butterfly theme configuration</p><p>Open the <code>_config.butterfly.yml</code> configuration file in the project root directory, and add the following section:</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pwa:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">Enable/Disable</span> <span class="string">PWA</span></span><br><span class="line">  <span class="attr">manifest:</span> <span class="string">/img/pwa/manifest.json</span> <span class="string">//</span> <span class="string">Manifest</span> <span class="string">inclusion</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/img/pwa/logo.png</span> <span class="string">//</span> <span class="string">Icon</span> <span class="string">used</span> <span class="string">when</span> <span class="string">installing</span> <span class="string">Web</span> <span class="string">App</span> <span class="string">on</span> <span class="string">Safari</span> <span class="string">on</span> <span class="string">iOS</span></span><br><span class="line">  <span class="attr">favicon_32_32:</span> <span class="string">/img/pwa/logo32-32.png</span> <span class="string">//</span> <span class="number">32</span><span class="string">*32</span> <span class="string">pixel</span> <span class="string">icon</span></span><br><span class="line">  <span class="attr">favicon_16_16:</span> <span class="string">/img/pwa/logo16-16.png</span> <span class="string">//</span> <span class="number">16</span><span class="string">*16</span> <span class="string">pixel</span> <span class="string">icon</span></span><br><span class="line">  <span class="attr">mask_icon:</span> <span class="string">/img/pwa/logo.png</span> <span class="string">//</span> <span class="string">Standard</span> <span class="string">size</span> <span class="string">icon</span></span><br></pre></td></tr></table></figure><p>See above comments for specific configuration item meanings</p><blockquote><p>Warning⚠️: Please ensure the correct relative paths for <code>manifest.json</code> and various size logos.</p></blockquote></li></ol><h1 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h1><p>After correctly completing the above process, opening the website will now allow you to install the App:</p><p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704782623202.jpg" alt="1704782626684"></p><p>PWA Web App access effect is as follows:</p><p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704783576771.jpg" alt="1704783579624"></p><p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704783306078.jpg" alt="1704783309101">  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;This solution is based on the Butterfly theme for Hexo, for details see &lt;a href=&quot;https://xsun.work/zh/posts/4b4dbb3/&quot;&gt;Butterfly - Hexo Th</summary>
      
    
    
    
    <category term="Web" scheme="http://xsun.work/categories/Web/"/>
    
    
    <category term="Hexo" scheme="http://xsun.work/tags/Hexo/"/>
    
    <category term="Blog" scheme="http://xsun.work/tags/Blog/"/>
    
    <category term="PWA" scheme="http://xsun.work/tags/PWA/"/>
    
    <category term="Web App" scheme="http://xsun.work/tags/Web-App/"/>
    
    <category term="Web" scheme="http://xsun.work/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>github-ssh</title>
    <link href="http://xsun.work/posts/4bbb0782/"/>
    <id>http://xsun.work/posts/4bbb0782/</id>
    <published>2024-01-08T14:18:55.000Z</published>
    <updated>2024-01-09T08:17:12.471Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">详见Github官方文档 - Connecting to GitHub with SSH</a></p></blockquote><p>Github SSH<br><a href="https://blog.csdn.net/qq_36667170/article/details/79094257">https://blog.csdn.net/qq_36667170/article/details/79094257</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.github.com/en/authentication/connecting-to-github-with-ssh&quot;&gt;详见Github官方文档 - Connecting to GitHub with S</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>github-pages</title>
    <link href="http://xsun.work/posts/b1622bb3/"/>
    <id>http://xsun.work/posts/b1622bb3/</id>
    <published>2024-01-08T14:17:57.000Z</published>
    <updated>2024-01-08T14:24:31.521Z</updated>
    
    <content type="html"><![CDATA[<p>github page custom domain<br><a href="https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#about-custom-domain-configuration">https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#about-custom-domain-configuration</a><br>使用 HTTPS 保护 GitHub Pages 站点 <a href="https://docs.github.com/zh/pages/getting-started-with-github-pages/securing-your-github-pages-site-with-https">https://docs.github.com/zh/pages/getting-started-with-github-pages/securing-your-github-pages-site-with-https</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;github page custom domain&lt;br&gt;&lt;a href=&quot;https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Butterfly - Hexo theme installation and configuration</title>
    <link href="http://xsun.work/posts/c9954876/"/>
    <id>http://xsun.work/posts/c9954876/</id>
    <published>2024-01-08T12:01:41.000Z</published>
    <updated>2024-01-15T06:33:16.914Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704718063078.jpg" alt="1704718064735"></p><h1 id="Theme-Selection"><a href="#Theme-Selection" class="headerlink" title="Theme Selection"></a>Theme Selection</h1><p>The official website offers over 400 themes for selection (<a href="https://hexo.io/themes/">https://hexo.io/themes/</a>).</p><p>However, since Hexo itself is just a static web page framework driven by Markdown documents, a lot of functionalities are actually implemented by theme authors and plugin authors, leading to significant differences between themes.</p><p><strong>Butterfly</strong></p><p><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a> is what I consider a standout among Hexo themes:</p><ol><li>This project has been updated since 2019 and is still being updated stably, with its latest release published last week (2024.1).</li><li>The project has 6.3K Stars (as of 2024.1), making it one of the highest-rated themes in the entire Hexo community.</li><li>The project has 1024 Closed Issues and only 3 Open Issues (as of 2024.1). I also raised an <a href="https://github.com/jerryc127/hexo-theme-butterfly/issues/1423">Issue</a> during the installation and configuration process, which was addressed by the author on the same day.</li><li>Very complete web responsiveness support, with a great mobile experience.</li><li>Most importantly, this theme is extremely powerful. Dark mode, social sharing of articles, Algolia search, TOC, automatic related article recommendation, global traditional and simplified Chinese conversion, PWA web app, visitor counting, word count, uptime, large image mode, reading mode, external link prefetch (automatic preloading on mouse hover), Cloudflare Analytics, and more can all be achieved through configuration!</li></ol><p>With such an excellent, stable, and feature-rich project, what more could one ask for!</p><blockquote><p>Official Documentation: <a href="https://butterfly.js.org/posts/21cfbf15/">https://butterfly.js.org/posts/21cfbf15/</a><br>Official Github: <a href="https://github.com/jerryc127/hexo-theme-butterfly">https://github.com/jerryc127/hexo-theme-butterfly</a></p></blockquote><h1 id="Theme-Installation"><a href="#Theme-Installation" class="headerlink" title="Theme Installation"></a>Theme Installation</h1><p><strong>Installation</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install hexo-theme-butterfly</span><br></pre></td></tr></table></figure><p><strong>Upgrade</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm update hexo-theme-butterfly</span><br></pre></td></tr></table></figure><h1 id="Theme-Application"><a href="#Theme-Application" class="headerlink" title="Theme Application"></a>Theme Application</h1><p><strong>Application</strong></p><p>Configure the <code>_config.yml</code> in the project root directory:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><p><strong>Install Rendering Plugins</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><h1 id="Theme-Configuration"><a href="#Theme-Configuration" class="headerlink" title="Theme Configuration"></a>Theme Configuration</h1><blockquote><p>Official Theme Configuration Documentation Part1: <a href="https://butterfly.js.org/posts/4aa8abbe/">https://butterfly.js.org/posts/4aa8abbe/</a><br>Official Theme Configuration Documentation Part2: <a href="https://butterfly.js.org/posts/ceeb73f/">https://butterfly.js.org/posts/ceeb73f/</a></p></blockquote><p><strong>_config.butterfly.yml</strong></p><ol><li>Create a <code>_config.butterfly.yml</code> configuration file in the root directory.</li><li>Refer to the official theme documentation for basic configuration.</li></ol><p><strong>Run the Project</strong></p><p>At this point, the theme should be active.</p><p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704719743684.png" alt="1704719751543"></p><h1 id="Precautions⚠️"><a href="#Precautions⚠️" class="headerlink" title="Precautions⚠️"></a>Precautions⚠️</h1><blockquote><p>The following issues pertain to hexo 7.0.0 and butterfly 4.12.0</p></blockquote><ol><li><p><code>canvas_fluttering_ribbon.mobile: true</code> (enabling mobile background ribbon animation) causes background synchronization issues when switching to dark mode on some mobile devices. It is recommended to disable this feature.</p></li><li><p>Setting <code>subtitle</code> directly with <code>startDelay</code>, <code>typeSpeed</code>, and <code>backSpeed</code> is ineffective. You need to configure a <code>typed_option</code> layer in between, as shown in the example below:</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">effect:</span> <span class="literal">true</span> <span class="comment"># Typewriter Effect</span></span><br><span class="line">    <span class="attr">typed_option:</span> <span class="comment"># over here</span></span><br><span class="line">        <span class="attr">startDelay:</span> <span class="number">800</span> <span class="comment"># time before typing starts in milliseconds</span></span><br><span class="line">        <span class="attr">typeSpeed:</span> <span class="number">100</span> <span class="comment"># type speed in milliseconds</span></span><br><span class="line">        <span class="attr">backSpeed:</span> <span class="number">20</span> <span class="comment"># backspacing speed in milliseconds</span></span><br><span class="line">    <span class="attr">loop:</span> <span class="literal">true</span> <span class="comment"># loop typing</span></span><br><span class="line">    <span class="attr">source:</span> <span class="literal">false</span></span><br><span class="line">    <span class="string">...</span></span><br></pre></td></tr></table></figure></li><li><p>When configuring <code>social</code> colors, it does not switch colors according to the dark mode.</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">    <span class="attr">fab fa-youtube:</span> <span class="string">https://www.youtube.com/@aghenim</span> <span class="string">||</span> <span class="string">Youtube</span> <span class="string">||</span> <span class="string">&quot;red&quot;</span> <span class="comment"># fixed red</span></span><br><span class="line">    <span class="attr">fab fa-youtube:</span> <span class="string">https://www.youtube.com/@aghenim</span> <span class="string">||</span> <span class="string">Youtube</span> <span class="comment"># default black, white in dark mode</span></span><br></pre></td></tr></table></figure></li><li><p>To enable <strong>Addtoany</strong>, you need to manually disable <strong>sharejs</strong> first. Sharejs supports fewer platforms and, as the project is no longer maintained for several years, platforms that have been renamed cannot be configured, hence it&#39;s recommended to use Addtoany.</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sharejs:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span> <span class="comment"># disable sharejs before enabling addtoany</span></span><br><span class="line"><span class="attr">addtoany:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">item:</span> <span class="string">x,whatsapp,wechat,email,copy_link</span> <span class="comment"># desired contents</span></span><br></pre></td></tr></table></figure></li><li><p>When <code>pjax.enable: true</code>, files injected by <code>inject</code>, such as styles and JS, may be loaded repeatedly, causing issues.</p></li><li><p>JS files injected into <code>inject.head</code> can&#39;t access DOM elements (obviously, as the DOM has not yet rendered). JS files injected into <code>inject.bottom</code> take a short delay to take effect, meaning animations and similar effects are not immediately visible. If you&#39;re concerned about this, you can insert a DOMContentLoaded listener in the head.</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// your function here.</span></span><br><span class="line">&#125;); </span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704718063078.jpg&quot; alt=&quot;1704718064735&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;Theme-Selection&quot;&gt;&lt;a href</summary>
      
    
    
    
    <category term="Web" scheme="http://xsun.work/categories/Web/"/>
    
    
    <category term="Hexo" scheme="http://xsun.work/tags/Hexo/"/>
    
    <category term="Blog" scheme="http://xsun.work/tags/Blog/"/>
    
    <category term="Web" scheme="http://xsun.work/tags/Web/"/>
    
    <category term="Butterfly" scheme="http://xsun.work/tags/Butterfly/"/>
    
    <category term="Theme" scheme="http://xsun.work/tags/Theme/"/>
    
  </entry>
  
  <entry>
    <title>Create a personal blog with Hexo</title>
    <link href="http://xsun.work/posts/6f34bf22/"/>
    <id>http://xsun.work/posts/6f34bf22/</id>
    <published>2024-01-08T07:25:45.000Z</published>
    <updated>2024-01-08T15:07:59.748Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704701475952.jpg" alt="1704701477603"></p><blockquote><p>Official Documentation: <a href="https://hexo.io/docs/">https://hexo.io/docs/</a></p></blockquote><h1 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h1><p>You will need:</p><ol><li>Node.js (12.0 or higher)</li><li>Git</li></ol><p>To check your environment, please enter the following commands and ensure you get similar return results:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git -v</span><br><span class="line"><span class="comment"># git version 2.xx.x</span></span><br><span class="line"></span><br><span class="line">node -v</span><br><span class="line"><span class="comment"># v18.xx.x</span></span><br><span class="line"></span><br><span class="line">npm -v</span><br><span class="line"><span class="comment"># 10.x.x</span></span><br></pre></td></tr></table></figure><h1 id="Initialize-Project"><a href="#Initialize-Project" class="headerlink" title="Initialize Project"></a>Initialize Project</h1><p>Navigate to the path where you want to store your blog source code and perform the following operations:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>After initialization, the directory structure should be as follows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── <span class="built_in">source</span></span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><h1 id="Install-Dependencies"><a href="#Install-Dependencies" class="headerlink" title="Install Dependencies"></a>Install Dependencies</h1><p>I personally prefer to use pnpm, but npm and yarn should be fine as well.</p><blockquote><p>The differences between Npm, Yarn, and Pnpm can be seen in <a href="./npm-yarn-pnpm-vs.html">TODO</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install</span><br></pre></td></tr></table></figure><h1 id="Running-the-Project"><a href="#Running-the-Project" class="headerlink" title="Running the Project"></a>Running the Project</h1><h2 id="Script-Explanation"><a href="#Script-Explanation" class="headerlink" title="Script Explanation"></a>Script Explanation</h2><p>Open <code>package.json</code>, and you will find the following scripts:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo server&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>They correspond to:</p><ul><li>build: Generate static web page resources (public).</li><li>clean: Clear the cache, mainly db.json and public.</li><li>deploy: Deploy, when used in conjunction with hexo-deployer-git, it will push static web page resources to a specified git project. Commonly used for Github Pages service.</li><li>server: Local debugging and running.</li></ul><h2 id="Running-the-Project-1"><a href="#Running-the-Project-1" class="headerlink" title="Running the Project"></a>Running the Project</h2><p>Execute the <code>server</code> script (<code>pnpm run server</code> or use the interactive button in the IDE) to run the project locally.</p><p>Under normal circumstances, you will get an output like this in the console:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">pnpm run server</span><br><span class="line">$ hexo server</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><p>At this point, if you visit <code>http://localhost:4000/</code> in your browser, you should be able to see your blog homepage.</p><p><img src="https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704700921055.png" alt="1704700921055"></p><h1 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h1><blockquote><p>Reference Documentation: <a href="https://hexo.io/docs/one-command-deployment">https://hexo.io/docs/one-command-deployment</a></p></blockquote><p>Use <strong>hexo-deployer-git</strong> <a href="https://github.com/hexojs/hexo-deployer-git">(Official Documentation)</a> in conjunction with *<br><em>GitHub Pages</em>* <a href="https://pages.github.com/">(Official Documentation)</a> service</p><h2 id="1-Configure-Github-Pages"><a href="#1-Configure-Github-Pages" class="headerlink" title="1. Configure Github Pages"></a>1. Configure Github Pages</h2><p>See <a href="./todo.html">TODO</a></p><h2 id="2-Configure-Local-SSH-Key-for-Github"><a href="#2-Configure-Local-SSH-Key-for-Github" class="headerlink" title="2. Configure Local SSH-Key for Github"></a>2. Configure Local SSH-Key for Github</h2><p>See <a href="./todo.html">TODO</a></p><h2 id="3-Install-hexo-deployer-git"><a href="#3-Install-hexo-deployer-git" class="headerlink" title="3. Install hexo-deployer-git"></a>3. Install hexo-deployer-git</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Run in the root directory of the project:</span></span><br><span class="line">pnpm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h2 id="4-Configure-config-yml"><a href="#4-Configure-config-yml" class="headerlink" title="4. Configure _config.yml"></a>4. Configure _config.yml</h2><p>Edit the _config.yml file in the root directory, and find the following section:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>If there is no <code>deploy: </code>, add it manually.</p></blockquote><p>Modify this configuration as follows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: git@github.com:&lt;Your-Github-Name&gt;/&lt;Your-Github-Name&gt;github.io.git <span class="comment"># Replace &lt;Your-Github-Name&gt; with your Github username</span></span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure><h2 id="5-Deploy-the-Project-to-Github-Pages"><a href="#5-Deploy-the-Project-to-Github-Pages" class="headerlink" title="5. Deploy the Project to Github Pages"></a>5. Deploy the Project to Github Pages</h2><ol><li>Run <code>hexo deploy</code> or <code>pnpm run deploy</code>.</li><li>Visit your-github-name.github.io (replace your-github-name with your Github username).</li></ol><h2 id="6-Optional-Resolving-Conflicts-with-Custom-Domain-CNAME-in-Github-Pages"><a href="#6-Optional-Resolving-Conflicts-with-Custom-Domain-CNAME-in-Github-Pages" class="headerlink" title="6. (Optional) Resolving Conflicts with Custom Domain CNAME in Github Pages"></a>6. (Optional) Resolving Conflicts with Custom Domain CNAME in Github Pages</h2><p>When a custom domain is configured for Github Pages, Github automatically commits a record named <code>Create CNAME</code> to the project.</p><p>Since hexo-deployer-git is a one-way automated push, we cannot receive this commit.</p><p>Therefore, the remedy is to <strong>manually download the CNAME file (or create a new file with the same name and copy its contents) and place it in the <code>source</code> directory</strong>.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Aghenim/file@main/hexo/1704701475952.jpg&quot; alt=&quot;1704701477603&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Official Documen</summary>
      
    
    
    
    <category term="Web" scheme="http://xsun.work/categories/Web/"/>
    
    
    <category term="Hexo" scheme="http://xsun.work/tags/Hexo/"/>
    
    <category term="Blog" scheme="http://xsun.work/tags/Blog/"/>
    
    <category term="Web" scheme="http://xsun.work/tags/Web/"/>
    
  </entry>
  
</feed>
